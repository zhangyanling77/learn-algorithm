# 算法的实际应用

## Bitmap的巧用

一个关于用户标签的需求。需要开发一个用户画像系统，实现用户信息标签化。用户标签包括用户的社会属性、生活习惯、消费行为等信息。通过用户标签，可以对多样的用户群体进行统计，比如统计用户的男女比例、统计喜欢旅行的用户的数量等。

这里用到**Bitmap算法**，又叫作**位图算法**。这里的位图指的是内存中连续的二进制位所组成的数据结构，该算法主要用于对大量整数做去重和查询操作。

```javascript
class MyBitmap {
  constructor(size) {
    // Bitmap位数大小
    this.size = size;
    // 其中的每个word都是一个long型元素，对应一个64位二进制数据
    this.words = new Array(this.getWordIndex(size - 1) + 1);
  }
  // 定位Bitmap某一位对应的word
  getWordIndex(bitIndex) {
    // 右移6位，相当于除以64
    return bitIndex >> 6
  }
  // 判断Bitmap某一位的状态 bitIndex表示位图的第bitIndex位
  getBit(bitIndex) {
    if (bitIndex<0 || bitIndex > this.size - 1) {
      throw new Error('超出Bitmap的有效范围！')
    }
    let wordIndex = this.getWordIndex(bitIndex);
    return (this.words[wordIndex] & (1 << bitIndex)) !== 0;
  }
  // 把Bitmap某一位设置为true
  setBit(bitIndex) {
    if (bitIndex<0 || bitIndex > this.size - 1) {
      throw new Error('超出Bitmap的有效范围！')
    }
    let wordIndex = this.getWordIndex(bitIndex);
    this.words[wordIndex] |= (1 << bitIndex)
  }
}

let bitmap = new MyBitmap(128);
bitmap.setBit(126);
bitmap.setBit(75);
console.log(bitmap.getBit(126)); // true
console.log(bitmap.getBit(78)); // false
```

## LRU算法的应用

## 什么是A星寻路算法

## 如何实现红包算法
