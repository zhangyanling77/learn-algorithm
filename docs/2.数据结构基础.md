# 数据结构基础

## 什么是数组

数组（array），是有限个相同类型的变量所组成的有序集合，数组中的每个变量被称为元素。

数组是最为简单、最为常用的数据结构。特点如下：

数组在内存中是顺序存储的（内存是由一个个连续的内存单元组成，每一个内存单元都有自己的地址）。

数组中的每一个元素，都存储在小小的内存单元中，并且元素之间紧密排列，既不能打乱元素的存储顺序，也不能跳过某个存储单元进行存储。

### 数组的基本操作

#### 读取元素

由于数组在内存中是顺序存储的，因此通过数组下标即可读取到对应的数组元素。

```javascript
const arr = new Array(1, 2, 3, 4);
console.log(arr[2]) // 3
```

#### 更新元素

同样是利用下标，将值赋给对应的数组元素即可修改值。

```javascript
const arr = new Array(1, 2, 3, 4);
arr[3] = 5
console.log(arr) // [ 1, 2, 3, 5 ]
```

#### 插入元素

由于数组的实际元素数量可能小于数组的长度，那么数组插入元素的操作存在3种情况。

- 队尾插入

  这种情况直接吧要插入的元素放在数组尾部的空闲位置即可。

  ```javascript
  const arr = new Array(1, 2, 3, 4);
  arr[4] = 5
  console.log(arr) // [1, 2, 3, 4, 5] 
  ```

- 中间插入和超范围插入

  这种稍微复杂，由于数组的每一个元素都有固定的下标，所以不得不首先把插入位置及后面的元素向后移动，腾出地方，再把要插入的元素放到对应的数组位置上。同时，要考虑超范围插入的情况，也就是当数组已经满了还要插入新元素的情况。

  ```javascript
  /** 
  * 思路：
  * 1、首先生成一个给定容量 (capacity) 大小的数组，默认实际元素的个数 size 为 0
  * 2、向数组中插入元素，传入插入的位置 index，插入的元素 element
  * 3、判断传入的 index 是否越界，若越界抛出错误
  * 4、从右向左循环，将元素逐个向后挪一位
  * 5、将要插入的元素放到数组对应index下标的位置上
  * 
  * 这里需要注意，超范围插入的情况。解决办法是，创建一个新数组，它的长度是原数组的两倍，并将原数组中的所有元素复制到新的数组中，实现数组的扩容。
  */
  class MyArray {
    constructor(capacity) {
      this.array = new Array(capacity);
      this.size = 0;
    }

    resize () {
      const arrayNew = new Array(this.array.length * 2);
      for (let i = 0; i < this.array.length; i++) {
        arrayNew[i] = this.array[i]
      }
      this.array = arrayNew
    }

    insert(index, element) {
      // 边界判断
      if (index < 0 || index > this.size) {
        throw new Error('超出数组实际元素范围！')
      }
      // 超范围插入
      if (this.size >= this.array.length) {
        this.resize()
      }
      // 从右向左循环，将元素逐个向后挪一位
      for (let i = this.size - 1; i >= index; i--) {
        this.array[i + 1] = this.array[i]
      }
      // 插入元素
      this.array[index] = element;
      this.size++;
    }

    output() {
      for (let i = 0; i < this.size; i++) {
        console.log(this.array[i])
      }
    }
  }

  const arr = new MyArray(4);

  // arr.insert(-1, 3) // 抛错
  // arr.insert(5, 9) // 抛错

  arr.insert(0, 3)
  arr.insert(1, 7)
  arr.insert(2, 9)
  arr.insert(3, 5)
  arr.insert(1, 6)

  arr.output() // 3 6 7 9 5
  console.log(arr) // MyArray { array: [ 3, 6, 7, 9, 5, <3 empty items> ], size: 5 }
  ```

#### 删除元素

数组的删除操作和插入操作的过程相反，如果删除的元素位于数组中间，其后面的元素都要向前挪一位。

```javascript
class MyArray {
  constructor(capacity) {
    this.array = new Array(capacity);
    this.size = 0;
  }
  // ...
  output() {
    for (let i = 0; i < this.size; i++) {
      console.log(this.array[i])
    }
  }

  delete(index) {
    // 判断越界
    if (index < 0 || index >= this.size) {
      throw new Error('超出数组实际元素范围！')
    }
    const deletedElement = this.array[index];
    // 从左向右循环，将元素逐个向前挪一位
    for (let i = index; i < this.size - 1; i++) {
      this.array[i] = this.array[i + 1]
    }
    this.size--;
    return deletedElement
  }
}
const arr = new MyArray(4);

arr.insert(0, 3)
arr.insert(1, 7)
arr.insert(2, 9)
arr.insert(3, 5)
arr.insert(1, 6)

arr.delete(3) // 也就是删掉9
arr.output() // 3 6 7 5

```

## 什么是链表